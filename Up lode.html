<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload - qUick</title>
    <!-- Link To CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/Up_lode.css">
    <!-- Fav Icon -->
    <link rel="shortcut icon" href="img/fav-icon.png" type="image/x-icon">
    <!-- Box Icons -->
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <!-- Header -->
    <header>
        <!-- Nav -->
        <div class="nav container">
            <!-- Logo -->
            <a href="index.html" class="logo">
                q<span>U</span><span>i</span>ck
            </a>
            <!-- Search Box -->
            <div class="search-box">
                <input type="search" name="" id="search-input" placeholder="Search movie">
                <i class='bx bx-search'></i>
            </div>
            <!-- User -->
            <a href="#" class="user">
                <img src="img/user.jpg" alt="" class="user-img">
            </a>
            <!-- NavBar -->
            <div class="navbar">
                <a href="index.html" class="nav-link ">
                    <i class='bx bx-home' ></i>
                    <span class="nav-link-title">Home</span>
                </a>
                <a href="index.html" class="nav-link">
                    <i class='bx bxs-hot' ></i>
                    <span class="nav-link-title">Trending</span>
                </a>
                <a href="index.html" class="nav-link">
                    <i class='bx bx-compass' ></i>
                    <span class="nav-link-title">Explore</span>
                </a>
                <a href="play-page.html" class="nav-link">
                    <i class='bx bx-tv' ></i>
                    <span class="nav-link-title">Movies</span>
                </a>
                <a href="cart.html" class="nav-link">
                    <i class='bx bx-cart'></i>
                    <span class="nav-link-title">Cart</span>
                </a>
                <a href="#home" class="nav-link nav-active">
                    <i class='bx bx-up-arrow-circle'></i>
                    <span class="nav-link-title">Up lode</span>
                </a>
            </div>
        </div>
    </header>
    
    <section class="movies container" id="movies">
        <!-- Heading -->
        <div class="heading">
          <h1 class="heading-title">Uplode</h1>
        </div>
        <!-- Content -->
        <form class="upload-content" id="upload-form">
          <div class="upload-left">
            <label for="title" class="upload-title">タイトル</label>
            <input type="text" id="title" name="title" required />
            <label for="description" class="upload-description">説明欄</label>
            <textarea
              id="description"
              name="description"
              rows="4"
              required
            ></textarea>
          </div>
          <div class="upload-area" id="upload-area">
            <div class="upload-icon">
              <i class="bx bx-image"></i>
              <i class="bx bx-play-circle"></i>
            </div>
            <p>ここに写真や動画をドラッグ</p>
            <button class="upload-button" id="upload-button" type="button">
              コンピューターから選択
            </button>
            <input
              type="file"
              id="file-input"
              name="file"
              accept="image/*"
              required
            />
  
            <script>
              const uploadArea = document.getElementById("upload-area");
              const fileInput = document.getElementById("file-input");
  
              //ボタンを押してファイル選択
              document
                .getElementById("upload-button")
                .addEventListener("click", () => {
                  fileInput.click();
                });
              fileInput.addEventListener("change", (event) => {
                const file = event.target.files[0];
                if (file) {
                  console.log("selected file:", file);
                  uploadFile(file);
                }
              });
  
              //ドラッグ＆ドロップでファイル選択
              uploadArea.addEventListener("dragover", () => {
                event.preventDefault();
                uploadArea.classList.add("dragover");
              });
              uploadArea.addEventListener("dragleave", () => {
                uploadArea.classList.remove("dragover");
              });
              uploadArea.addEventListener("drop", (event) => {
                event.preventDefault();
                uploadArea.classList.remove("dragover");
                const file = event.dataTransfer.files[0];
                if (file.type.startsWith("image/")) {
                  console.log("selected file:", file);
                  uploadFile(file);
                  const dataTransfer = new DataTransfer();
                  dataTransfer.items.add(file);
                  fileInput.files = dataTransfer.files;
                }
              });
  
              //画像ファイルアップロード
              function uploadFile(file) {
                Array.from(uploadArea.children).forEach((child) => {
                  if (child.id !== "file-input") {
                    uploadArea.removeChild(child);
                  }
                });
  
                const img = document.createElement("img");
                img.src = "img/homelander.jpg"; //仮に適当な写真表示
                img.alt = "画像";
  
                const changeButton = document.createElement("button");
                changeButton.textContent = "画像変更";
                changeButton.className = "upload-button";
                changeButton.id = "change-button";
                changeButton.type = "button";
  
                uploadArea.append(img, changeButton);
  
                document
                  .getElementById("change-button")
                  .addEventListener("click", () => {
                    fileInput.click();
                  });
              }
            </script>
          </div>
          <div class="upload-right">
            <label for="link" class="upload-link">商品リンク</label>
            <input
              type="url"
              id="link"
              name="link"
              placeholder="https://example.com"
              required
              class="upload-linkInput"
            />
            <input type="submit" value="投稿" class="upload-post" />
          </div>
        </form>
  
        <script>
          //未完成
          document
            .getElementById("upload-form")
            .addEventListener("submit", (event) => {
              event.preventDefault();
              const formData = new FormData(
                document.getElementById("upload-form")
              );
              formData.forEach((value, key) => {
                console.log(
                  key == "file" ? `${key}: ${value.name}` : `${key}: ${value}`
                );
              });
  
              //フォームデータの記録
            });
        </script>
      </section>

    
</body>
</html>

